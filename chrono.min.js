(function(){var moment,chrono;(function(){chrono=function(){for(var attr in chrono){this[attr]=chrono[attr]}this.parsers={};for(var p in chrono.parsers)this.parsers[p]=chrono.parsers[p];this.refiners={};for(var r in chrono.refiners)this.refiners[r]=chrono.refiners[r];this.timezoneMap={};for(var r in chrono.timezoneMap)this.timezoneMap[r]=chrono.timezoneMap[r]};chrono.timezoneMap={};chrono.parsers={};chrono.refiners={};chrono.parse=function(text,referrenceDate,option){option=option||{};if(typeof referrenceDate==="string"){var _ref=moment(referrenceDate).zone(referrenceDate);option.timezoneOffset=_ref.zone();referrenceDate=_ref.toDate()}var results=this.integratedParse(text,referrenceDate,option);var results=this.integratedRefine(text,results,option);return results};chrono.parseDate=function(text,referrenceDate,timezoneOffset){var results=this.parse(text,referrenceDate);if(results.length>=1)return results[0].start.date(timezoneOffset);else return null};if(typeof exports=="undefined"){moment=moment||window.moment;window.chrono=chrono}else{moment=require("moment");module.exports=chrono}})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";chrono.timezoneMap={A:60,ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,B:120,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,C:180,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,D:240,DAVT:420,E:300,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,F:360,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,G:420,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,H:480,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,I:540,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:60,JST:540,K:600,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,L:660,LHDT:660,LHST:630,LINT:840,M:720,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,N:-60,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,O:-120,OMSST:420,OMST:420,P:-180,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,Q:-240,R:-300,RET:240,S:-360,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,T:-420,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,U:-480,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,V:-540,VET:-210,VLAST:660,VLAT:660,VUT:660,W:-600,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,X:-660,Y:-720,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360,Z:0}})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function DateComponents(components){this.year=components.year;this.month=components.month;this.day=components.day;this.hour=components.hour;this.minute=components.minute;this.second=components.second;this.timezoneOffset=components.timezoneOffset;this.dayOfWeek=components.dayOfWeek;if(components.meridiem)this.meridiem=components.meridiem.toLowerCase();if(components.impliedComponents&&components.impliedComponents.length>0){this.impliedComponents=components.impliedComponents}this.isCertain=function(component){return this[component]!==undefined&&this[component]!==null&&(this.impliedComponents?this.impliedComponents.indexOf(component)<0:true)};this.date=function(timezoneOffset){if(timezoneOffset===undefined||timezoneOffset===null){timezoneOffset=this.timezoneOffset}else{if(this.isCertain("timezoneOffset"))timezoneOffset=this.timezoneOffset}if(timezoneOffset===undefined||timezoneOffset===null)timezoneOffset=(new Date).getTimezoneOffset();var dateMoment=moment(new Date(this.year,this.month,this.day));if(this.hour===undefined||this.hour===null)dateMoment.hours(12);else dateMoment.hours(this.hour);dateMoment.minutes(this.minute);dateMoment.seconds(this.second);dateMoment.add("minutes",timezoneOffset-(new Date).getTimezoneOffset());return dateMoment.toDate()};this.assign=function(component,value){this[component]=value;if(this.impliedComponents&&this.impliedComponents.indexOf(component)>=0){var index=this.impliedComponents.indexOf(component);this.impliedComponents.splice(index,1)}};this.imply=function(component,value){this[component]=value;if(!this.impliedComponents)this.impliedComponents=[];if(this.impliedComponents.indexOf(component)<0){this.impliedComponents.push(component)}};if(this.isCertain("hour")&&this.hour>12){this.assign("meridiem","pm")}}function ParseResult(result){this.start=new DateComponents(result.start);this.startDate=this.start.date();if(result.end){this.end=new DateComponents(result.end);this.endDate=this.end.date()}this.referenceDate=result.referenceDate;this.index=result.index;this.text=result.text;this.concordance=result.concordance;if(result.timezoneOffset){this.timezoneOffset=result.timezoneOffset}}chrono.DateComponents=DateComponents;chrono.ParseResult=ParseResult})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function Parser(text,ref,opt){opt=opt||{};var timezoneMap=opt.timezoneMap||chrono.timezoneMap;var searchingIndex=0;var searchingText=text;var searchingFinished=false;var searchingResults=[];var parser={};parser.pattern=function(){return/./i};parser.extract=function(text,index){return null};parser.results=function(){return searchingResults};parser.finished=function(){return searchingFinished};parser.mergeOverlapResult=function(text,result1,result2){if(result2.index<result1.index){var tmp=result1;result1=result2;result2=tmp}var begin=result1.index+result1.text.length;var end=result2.index;if(end<begin&&result1.index<result2.index&&begin<result2.index+result2.text.length){var mergedIndex=result1.index;var mergedText=text.substring(result1.index,result2.index+result2.text.length);var impliedComponents1=result1.start.impliedComponents||[];var impliedComponents2=result2.start.impliedComponents||[];if(impliedComponents1.length<impliedComponents2.length){var tmp=result1;result1=result2;result2=tmp;impliedComponents1=result1.start.impliedComponents||[];impliedComponents2=result2.start.impliedComponents||[]}if(impliedComponents1.indexOf("day")<0||impliedComponents1.indexOf("month")<0||impliedComponents1.indexOf("year")<0)return;return new chrono.ParseResult({referenceDate:result1.ref,index:mergedIndex,start:result2.start,end:result2.end,text:mergedText,referenceDate:result1.referenceDate})}var textBetween=text.substring(begin,end);var OVERLAP_PATTERN=/^\s*(to|\-)\s*$/i;if(!textBetween.match(OVERLAP_PATTERN))return null;var mergedText=result1.text+textBetween+result2.text;var components1=new Object(result1.start);var components2=new Object(result2.start);var impliedComponents1=result1.start.impliedComponents||[];var impliedComponents2=result2.start.impliedComponents||[];impliedComponents1.forEach(function(unknown_component){if(components2.isCertain(unknown_component)){components1.assign(unknown_component,components2[unknown_component])}});impliedComponents2.forEach(function(unknown_component){if(components1.isCertain(unknown_component)){components2.assign(unknown_component,components1[unknown_component])}});if(moment(components2.date()).diff(moment(components1.date()))>0){return new chrono.ParseResult({referenceDate:result1.ref,index:result1.index,start:components1,end:components2,text:mergedText,referenceDate:result1.referenceDate})}else{return new chrono.ParseResult({referenceDate:result1.ref,index:result1.index,start:components2,end:components1,text:mergedText,referenceDate:result1.referenceDate})}};parser.extractTime=function(text,result){var SUFFIX_PATTERN=/^\s*,?\s*(at|from)?\s*,?\s*([0-9]{1,4}|noon|midnight)((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?(\W|$)/i;if(text.length<=result.index+result.text.length)return null;text=text.substr(result.index+result.text.length);var matchedTokens=text.match(SUFFIX_PATTERN);if(!matchedTokens)return null;var minute=0;var second=0;var hour=matchedTokens[2];if(hour.toLowerCase()=="noon"){result.start.meridiem="pm";hour=12}else if(hour.toLowerCase()=="midnight"){result.start.meridiem="am";hour=0}else hour=parseInt(hour);if(matchedTokens[5]){minute=matchedTokens[5];minute=parseInt(minute);if(minute>=60)return null}else if(hour>100){minute=hour%100;hour=(hour-minute)/100}if(matchedTokens[8]){second=matchedTokens[8];second=parseInt(second);if(second>=60)return null}if(matchedTokens[10]){if(hour>12)return null;if(matchedTokens[10].toLowerCase()=="am"){if(hour==12)hour=0}if(matchedTokens[10].toLowerCase()=="pm"){if(hour!=12)hour+=12}result.start.meridiem=matchedTokens[10].toLowerCase()}if(hour>=12)result.start.meridiem="pm";if(hour>24)return null;result.text=result.text+matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[11].length);if(result.start.hour==undefined){result.start.hour=hour;result.start.minute=minute;result.start.second=second}var TO_SUFFIX_PATTERN=/^\s*(\-|\~|\〜|to|\?)\s*([0-9]{1,4})((\.|\:|\：)([0-9]{1,2})((\.|\:|\：)([0-9]{1,2}))?)?(\s*(AM|PM))?/i;text=text.substr(matchedTokens[0].length-matchedTokens[11].length);matchedTokens=text.match(TO_SUFFIX_PATTERN);if(!matchedTokens){if(result.end&&result.end.hour==undefined){result.end.hour=hour;result.end.minute=minute;result.end.second=second}return new chrono.ParseResult(result)}var minute=0;var second=0;var hour=matchedTokens[2];hour=parseInt(hour);if(matchedTokens[5]){minute=matchedTokens[5];minute=parseInt(minute);if(minute>=60)return null}else if(hour>100){if(!matchedTokens[10])return null;minute=hour%100;hour=(hour-minute)/100}if(matchedTokens[8]){second=matchedTokens[8];second=parseInt(second);if(second>=60)return null}if(matchedTokens[10]){if(hour>12)return null;if(matchedTokens[10].toLowerCase()=="am"){if(hour==12){hour=0;if(!result.end)result.end=new chrono.DateComponents(result.start);result.end.day+=1}}if(matchedTokens[10].toLowerCase()=="pm"){if(hour!=12)hour+=12}if(!result.start.meridiem){if(matchedTokens[10].toLowerCase()=="am"){if(result.start.hour==12)result.start.hour=0}if(matchedTokens[10].toLowerCase()=="pm"){if(result.start.hour!=12)result.start.hour+=12}result.start.imply("meridiem",matchedTokens[10].toLowerCase())}}result.text=result.text+matchedTokens[0];if(!result.end){result.end=new chrono.DateComponents(result.start);result.end.hour=hour;result.end.minute=minute;result.end.second=second}else{result.end.hour=hour;result.end.minute=minute;result.end.second=second}if(matchedTokens[10])result.end.meridiem=matchedTokens[10].toLowerCase();if(hour>=12)result.end.meridiem="pm";return new chrono.ParseResult(result)};parser.extractTimezone=function(text,result){var PATTERN=/^\s*(GMT|UTC)?(\+|\-)(\d{1,2}):?(\d{2})/;if(text.length<=result.index+result.text.length)return null;text=text.substr(result.index+result.text.length);var matchedTokens=text.match(PATTERN);if(matchedTokens){var timezoneOffset=parseInt(matchedTokens[3])*60+parseInt(matchedTokens[4]);var timezoneOffset=parseInt(matchedTokens[2]+timezoneOffset)*-1;if(result.end)result.end.timezoneOffset=timezoneOffset;result.start.timezoneOffset=timezoneOffset;result.text+=matchedTokens[0];text=text.substr(matchedTokens[0].length)}var PATTERN=/^\s*\(?([A-Z]{1,4})\)?(\W|$)/;var matchedTokens=text.match(PATTERN);if(matchedTokens&&timezoneMap[matchedTokens[1]]!==undefined){var timezoneAbbr=matchedTokens[1];var timezoneOffset=-timezoneMap[timezoneAbbr];if(result.start.timezoneOffset===undefined){result.start.timezoneOffset=timezoneOffset;if(result.end)result.end.timezoneOffset=timezoneOffset}result.text+=matchedTokens[0].substring(0,matchedTokens[0].length-matchedTokens[2].length)}return result};parser.extractConcordance=function(text,result){var conLength=30;preText=text.substr(0,result.index);preText=preText.replace(/(\r\n|\n|\r)/gm," ");preText=preText.replace(/(\s+)/gm," ");if(preText.length>conLength)preText="..."+preText.substr(preText.length-conLength+3,conLength-3);else preText=preText.substr(0,conLength);posText=text.substr(result.index+result.text.length);posText=posText.replace(/(\r\n|\n|\r)/gm," ");posText=posText.replace(/(\s+)/gm," ");if(posText.length>conLength)posText=posText.substr(0,conLength-3)+"...";else posText=posText.substr(0,conLength);result.concordance=preText+result.text+posText;return new chrono.ParseResult(result)};parser.exec=function(){if(searchingFinished)return null;var index=searchingText.search(this.pattern());if(index<0){searchingFinished=true;return null}var matchedIndex=index+searchingIndex;var result=this.extract(text,matchedIndex);if(!result){searchingText=searchingText.substr(index+1);searchingIndex=matchedIndex+1;return null}if(result.start.hour===undefined||result.end&&result.end.hour===undefined){var timedResult=this.extractTime(text,result);result=timedResult||result}if(result.start.timezoneOffset===undefined||result.end&&result.end.timezoneOffset===undefined){var resultWithTimezone=this.extractTimezone(text,result);result=resultWithTimezone||result;if(opt.timezoneOffset){if(result.start.timezoneOffset===undefined){result.start.imply("timezoneOffset",opt.timezoneOffset)}if(result.end&&result.end.timezoneOffset===undefined){result.end.imply("timezoneOffset",opt.timezoneOffset)}}}if(searchingResults.length>0){var oldResult=searchingResults[searchingResults.length-1];var overlapResult=this.mergeOverlapResult(text,oldResult,result);result=overlapResult||result}this.extractConcordance(text,result);searchingResults.push(result);searchingText=text.substr(result.index+result.text.length+1);searchingIndex=result.index+result.text.length+1;return result};parser.execAll=function(){while(!this.finished())this.exec()};return parser}chrono.Parser=Parser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function integratedParse(text,ref,opt,parserTypes){opt=opt||{};ref=ref||new Date;parserTypes=parserTypes||Object.keys(this.parsers);opt.timezoneMap=opt.timezoneMap||this.timezoneMap;var currentParserIndex=0;var parsers=[];var results=[];for(var i=0;i<parserTypes.length;i++){if(this.parsers[parserTypes[i]])parsers.push(new this.parsers[parserTypes[i]](text,ref,opt))}while(currentParserIndex<parsers.length){var currenParser=parsers[currentParserIndex];while(!currenParser.finished()){var result=currenParser.exec();if(result)insertNewResult(results,result)}currentParserIndex++}return results}function insertNewResult(results,newResult){var index=0;while(index<results.length&&results[index].index<newResult.index)index++;if(index<results.length){var overlapped_index=index;while(overlapped_index<results.length&&results[overlapped_index].index<newResult.index+newResult.text.length){if(results[overlapped_index].text.length>=newResult.text.length)return results;overlapped_index++}results.splice(index,overlapped_index-index)}if(index-1>=0){var oldResult=results[index-1];if(newResult.index<oldResult.index+oldResult.text.length){if(oldResult.text.length>=newResult.text.length)return results;else{results.splice(index-1,1);index=index-1}}}results.splice(index,0,newResult);return results}chrono.integratedParse=integratedParse})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function DateOnlyParser(text,ref,opt){var PATTERN=/(\W|^)(the\s*)?([0-9]{1,2})(th|rd|nd|st)(\W|$)/i;opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var matchedTokens=text.substr(index).match(PATTERN);if(text.substr(index-1).search(PATTERN)==0)return;if(matchedTokens==null){finished=true;return}var text=matchedTokens[0];text=matchedTokens[0].substr(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[1].length-matchedTokens[5].length);index=index+matchedTokens[1].length;var day=matchedTokens[3];day=parseInt(day);var date=moment(ref);date.date(day);if(day>31||date.date()!=day){return}return new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year(),impliedComponents:["month","year"]}})};return parser}chrono.parsers.DateOnlyParser=DateOnlyParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(\W|^)((\,|\(|\（)\s*)?((this|last|next)\s*)?(Sunday|Sun|Monday|Mon|Tuesday|Wednesday|Wed|Thursday|Thurs|Thur|Friday|Fri|Saturday|Sat)(\s*(\,|\)|\）))?(\W|$)/i;var DAYS_OFFSET={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thurs:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6};function DayOfWeekParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var results=this.results();var lastResult=results[results.length-1];if(lastResult){if(index<lastResult.index+lastResult.text.length)return null}var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0];index=index+matchedTokens[1].length;text=matchedTokens[0].substr(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[9].length-matchedTokens[1].length);var prefix=matchedTokens[5];var dayOfWeek=matchedTokens[6];dayOfWeek=dayOfWeek.toLowerCase();var offset=DAYS_OFFSET[dayOfWeek];if(offset===undefined)return null;var date=moment(ref).clone();if(prefix){prefix=prefix.toLowerCase();if(prefix=="last")date.day(offset-7);else if(prefix=="next")date.day(offset+7);else if(prefix=="this")date.day(offset)}else{var ref_offset=date.day();if(offset>ref_offset)date.day(offset);else date.day(offset+7)}return new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:offset,impliedComponents:["day","month","year"]}})};return parser}chrono.parsers.DayOfWeekParser=DayOfWeekParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/(today|tonight|tomorrow|yesterday|last\s*night|([0-9]+)\s*day(s)\s*ago|([0-9]{1,2})(\.|\:|\：)([0-9]{2})|([0-9]{1,2}\s*\W?\s*)?([0-9]{1,2})\s*(AM|PM)|at\s*([0-9]{1,2}|noon|midnight)|(noon|midnight))(\W|$)/i;function GeneralDateParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(full_text,index){var matchedTokens=full_text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var impliedComponents=null;var text=matchedTokens[0].toLowerCase();text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[12].length);var ref_moment=moment(ref);if(opt.timezoneOffset!==undefined)ref_moment=ref_moment.zone(opt.timezoneOffset);var date=null;var lowercase_text=text.toLowerCase();if(lowercase_text=="today"||lowercase_text=="tonight"){date=ref_moment.clone()}else if(lowercase_text=="tomorrow"){if(ref_moment.hour()<4)date=ref_moment.clone().hour(6);else date=ref_moment.clone().add("d",1)}else if(lowercase_text=="yesterday")date=ref_moment.clone().add("d",-1);else if(lowercase_text.match("last"))date=ref_moment.clone().add("d",-1);else if(lowercase_text.match("ago")){var days_ago=matchedTokens[2];days_ago=parseInt(days_ago);date=ref_moment.clone().add("d",-days_ago)}else{if(full_text.charAt(index-1).match(/\d/))return null;if(full_text.match(/\d+(\.\d+)%/))return null;while(full_text.charAt(index)==" ")index++;impliedComponents=["year","month","day"];date=ref_moment.clone();text=""}var result=new chrono.ParseResult({referenceDate:ref_moment.toDate(),text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year(),impliedComponents:impliedComponents}});var resultWithTime=parser.extractTime(full_text,result);result=resultWithTime||result;if(result.text.replace(/\s/g,"").length==0)return null;if(lowercase_text.match("night")){if(!resultWithTime){result.start.day=date.date()+1;result.start.hour=0;result.start.minute=0;result.start.second=0;result.start.impliedComponents=["hour","minute","second"];result=new chrono.ParseResult(result)}else if(resultWithTime.start.hour<6){date.add("d",1);result.start.day=date.date();result.start.month=date.month();result.start.year=date.year();result=new chrono.ParseResult(result)}else if(resultWithTime.start.hour<12&&!resultWithTime.start.meridiem){result.start.hour=resultWithTime.start.hour+12;result.start.meridiem="pm";result.start.impliedComponents=result.start.impliedComponents||[];result.start.impliedComponents.push("meridiem");result=new chrono.ParseResult(result)}}return result};return parser}chrono.parsers.GeneralDateParser=GeneralDateParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var PATTERN=/([0-9]{4})\-([0-9]{1,2})\-([0-9]{1,2})(\W|$)/i;function InternationalStandardParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null){finished=true;return}var text=matchedTokens[0];text=matchedTokens[0].substr(0,matchedTokens[0].length-matchedTokens[4].length);var date=moment(text,"YYYY-MM-DD");if(date.format("YYYY-M-D")!=text&&date.format("YYYY-MM-DD")!=text){return null}return new chrono.ParseResult({referenceDate:ref,text:text,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:date.day()}})};return parser}chrono.parsers.InternationalStandardParser=InternationalStandardParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var DAYS_OFFSET={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6};var regPattern=/(\W|^)((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?([0-9]{1,2})(st|nd|rd|th)?(\s*(to|\-|\s)\s*([0-9]{1,2})(st|nd|rd|th)?)?\s*(January|Jan|February|Feb|March|Mar|April|Apr|May|June|Jun|July|Jul|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)((\s*[0-9]{2,4})(\s*BE)?)?(\W|$)/i;function MonthNameLittleEndianParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return regPattern};parser.extract=function(text,index){var impliedComponents=[];var date=null;var dayOfWeek=null;text=text.substr(index);var originalText=text;var remainingText=text;var matchedTokens=text.match(regPattern);text=matchedTokens[0];text=matchedTokens[0].substr(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[14].length-matchedTokens[1].length);index=index+matchedTokens[1].length;var remainingText=remainingText.substr(matchedTokens[1].length+text.length);var originalText=text;if(matchedTokens[5])text=text.replace(matchedTokens[5],"");if(matchedTokens[6])text=text.replace(matchedTokens[6],"");var years=null;if(matchedTokens[11]){years=matchedTokens[12];years=parseInt(years);if(years<100){if(remainingText.match(/\s*(:|am|pm)/i)!=null){text=text.replace(matchedTokens[11],"");originalText=originalText.replace(matchedTokens[11],"");years=null}else{if(years>20)years=null;else years=years+2e3}}else if(matchedTokens[13]){text=text.replace(matchedTokens[13],"");years=years-543}}if(years){text=matchedTokens[4]+" "+matchedTokens[10]+" "+years;date=moment(text,"DD MMMM YYYY");if(!date)return null}else{text=matchedTokens[4]+" "+matchedTokens[10];date=moment(text,"DD MMMM");if(!date)return null;impliedComponents.push("year");date.year(moment(ref).year());var nextYear=date.clone().add("y",1);var lastYear=date.clone().add("y",-1);if(Math.abs(nextYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=nextYear}else if(Math.abs(lastYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=lastYear}}if(matchedTokens[3])dayOfWeek=DAYS_OFFSET[matchedTokens[3].toLowerCase()];if(matchedTokens[8]){var endDay=parseInt(matchedTokens[8]);var startDay=parseInt(matchedTokens[4]);var endDate=date.clone();date.date(startDay);endDate.date(endDay);if(date.format("D")!=matchedTokens[4])return null;if(endDate.format("D")!=matchedTokens[8])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:dayOfWeek,impliedComponents:impliedComponents},end:{day:endDate.date(),month:endDate.month(),year:endDate.year(),impliedComponents:impliedComponents}})}else{if(date.format("D")!=matchedTokens[4])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:dayOfWeek,impliedComponents:impliedComponents}})}};var baseExtractTime=parser.extractTime;parser.extractTime=function(text,result){var DAY_OF_WEEK_SUFFIX_PATTERN=/(\,|\(|\s)*(Sun|Sunday|Mon|Monday|Tue|Tuesday|Wed|Wednesday|Thur|Thursday|Fri|Friday|Sat|Saturday)(\,|\)|\s)*/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length);var matchedTokens=suffix_text.match(DAY_OF_WEEK_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){result.text=result.text+matchedTokens[0]}return baseExtractTime.call(this,text,result)};return parser}chrono.parsers.MonthNameLittleEndianParser=MonthNameLittleEndianParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var DAYS_OFFSET={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,wednesday:3,wed:3,thursday:4,thur:4,thu:4,friday:5,fri:5,saturday:6,sat:6};var regFullPattern=/(\W|^)((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?(,)?(\s*[0-9]{4})(\s*BE)?(\W|$)/i;var regShortPattern=/(\W|^)((Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s*,?\s*)?(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Jul|July|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s*(([0-9]{1,2})(st|nd|rd|th)?\s*(to|\-)\s*)?([0-9]{1,2})(st|nd|rd|th)?([^0-9]|$)/i;function MonthNameMiddleEndianParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return regShortPattern};parser.extract=function(text,index){var impliedComponents=[];var date=null;var dayOfWeek=null;var originalText="";text=text.substr(index);var matchedTokens=text.match(regFullPattern);if(matchedTokens&&text.indexOf(matchedTokens[0])==0){var text=matchedTokens[0];text=text.substring(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[14].length);index=index+matchedTokens[1].length;originalText=text;text=text.replace(matchedTokens[2],"");text=text.replace(matchedTokens[4],matchedTokens[4]+" ");if(matchedTokens[5])text=text.replace(matchedTokens[5],"");if(matchedTokens[10])text=text.replace(matchedTokens[10],"");if(matchedTokens[11])text=text.replace(","," ");if(matchedTokens[13]){var years=matchedTokens[12];years=" "+(parseInt(years)-543);text=text.replace(matchedTokens[13],"");text=text.replace(matchedTokens[12],years)}text=text.replace(matchedTokens[9],parseInt(matchedTokens[9])+"");date=moment(text,"MMMM DD YYYY");if(!date)return null}else{matchedTokens=text.match(regShortPattern);if(!matchedTokens)return null;var text=matchedTokens[0];text=text.substring(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[11].length);index=index+matchedTokens[1].length;originalText=text;text=text.replace(matchedTokens[2],"");text=text.replace(matchedTokens[4],matchedTokens[4]+" ");if(matchedTokens[4])text=text.replace(matchedTokens[5],"");date=moment(text,"MMMM DD");if(!date)return null;impliedComponents.push("year");date.year(moment(ref).year());var nextYear=date.clone().add("y",1);var lastYear=date.clone().add("y",-1);if(Math.abs(nextYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=nextYear}else if(Math.abs(lastYear.diff(moment(ref)))<Math.abs(date.diff(moment(ref)))){date=lastYear}}if(matchedTokens[3])dayOfWeek=DAYS_OFFSET[matchedTokens[3].toLowerCase()];if(matchedTokens[5]){var endDay=parseInt(matchedTokens[9]);var startDay=parseInt(matchedTokens[6]);var endDate=date.clone();date.date(startDay);endDate.date(endDay);if(date.format("D")!=matchedTokens[6])return null;if(endDate.format("D")!=matchedTokens[9])return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:dayOfWeek,impliedComponents:impliedComponents},end:{day:endDate.date(),month:endDate.month(),year:endDate.year(),impliedComponents:impliedComponents}})}else{if(date.format("D")!=parseInt(matchedTokens[9])+"")return null;return new chrono.ParseResult({referenceDate:ref,text:originalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:dayOfWeek,impliedComponents:impliedComponents}})}};var baseExtractTime=parser.extractTime;parser.extractTime=function(text,result){var DAY_OF_WEEK_SUFFIX_PATTERN=/(\,|\(|\s)*(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)(\,|\)|\s)*/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length,15);var matchedTokens=suffix_text.match(DAY_OF_WEEK_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){result.text=result.text+matchedTokens[0];var dayOfWeek=DAYS_OFFSET[matchedTokens[2].toLowerCase()];result.start.dayOfWeek=dayOfWeek}if(!result.start.impliedComponents||result.start.impliedComponents.indexOf("year")<0)return baseExtractTime.call(this,text,result);var YEAR_SUFFIX_PATTERN=/(\s*[0-9]{4})(\s*BE)?/i;if(text.length<=result.index+result.text.length)return null;var suffix_text=text.substr(result.index+result.text.length,15);var matchedTokens=suffix_text.match(YEAR_SUFFIX_PATTERN);if(matchedTokens&&suffix_text.indexOf(matchedTokens[0])==0){var years=matchedTokens[1];years=parseInt(years);if(years<100){if(years>20)years=null;else years=years+2e3}else if(matchedTokens[2]){years=years-543}var index=result.start.impliedComponents.indexOf("year");result.start.impliedComponents.splice(index,1);result.start.year=years;result.text=result.text+matchedTokens[0]}return baseExtractTime.call(this,text,result)};return parser}chrono.parsers.MonthNameMiddleEndianParser=MonthNameMiddleEndianParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";var DAYS_OFFSET={sunday:0,sun:0,monday:1,mon:1,tuesday:2,wednesday:3,wed:3,thursday:4,thur:4,friday:5,fri:5,saturday:6,sat:6};var PATTERN=/(\W|^)(Sun|Sunday|Mon|Monday|Tue|Tuesday|Wed|Wednesday|Thur|Thursday|Fri|Friday|Sat|Saturday)?\s*\,?\s*([0-9]{1,2})[\/\.]([0-9]{1,2})([\/\.]([0-9]{4}|[0-9]{2}))?(\W|$)/i;function SlashParser(text,ref,opt){opt=opt||{};ref=ref||new Date;var parser=chrono.Parser(text,ref,opt);parser.pattern=function(){return PATTERN};parser.extract=function(text,index){var matchedTokens=text.substr(index).match(PATTERN);if(matchedTokens==null)return;if(matchedTokens[1]=="/"||matchedTokens[7]=="/")return;var text=matchedTokens[0].substr(matchedTokens[1].length,matchedTokens[0].length-matchedTokens[7].length);var orginalText=text;if(text.match(/^\d.\d$/))return;index+=matchedTokens[1].length;if(!matchedTokens[6]&&matchedTokens[0].indexOf("/")<0)return;var date=null;var years=matchedTokens[6]||moment(ref).year()+"";var month=matchedTokens[3];var day=matchedTokens[4];var dayOfWeek=null;if(matchedTokens[2])dayOfWeek=DAYS_OFFSET[matchedTokens[2].toLowerCase()];
month=parseInt(month);day=parseInt(day);years=parseInt(years);if(month<1||month>12)return null;if(day<1||day>31)return null;if(years<100){if(years>50){years=years+2500-543}else{years=years+2e3}}text=month+"/"+day+"/"+years;date=moment(text,"M/D/YYYY");if(!date||date.date()!=day){date=moment(text,"D/M/YYYY");if(!date||date.date()!=month)return null}return new chrono.ParseResult({referenceDate:ref,text:orginalText,index:index,start:{day:date.date(),month:date.month(),year:date.year(),dayOfWeek:dayOfWeek}})};return parser}chrono.parsers.SlashParser=SlashParser})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function integratedRefine(text,results,opt){var orderedRefiners={};for(var name in this.refiners){var refiner=this.refiners[name];var order=refiner.order||0;orderedRefiners[order]=orderedRefiners[order]||[];orderedRefiners[order].push(refiner)}for(var order in orderedRefiners){orderedRefiners[order].forEach(function(refiner){results=refiner.refine(text,results,opt)})}return results}chrono.integratedRefine=integratedRefine})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function MergeComponentsRefine(text,results,opt){if(results.length<2)return results;var new_results=[];for(var i=0;i<results.length-1;i++){var refResult=results[i+1];var result=results[i];var textBetween=text.substring(result.index+result.text.length,refResult.index);var OVERLAP_PATTERN=/^\s*(of|on|\W)?\s*$/i;if(!textBetween.match(OVERLAP_PATTERN)){new_results.push(result);continue}if(result.start.hour===undefined){if(refResult.start.hour===undefined){new_results.push(result);continue}var dateComponents=new Object(result.start);var timeComponents=new Object(refResult.start)}else{if(refResult.start.hour!==undefined){new_results.push(result);continue}var timeComponents=new Object(result.start);var dateComponents=new Object(refResult.start)}dateComponents.hour=timeComponents.hour;dateComponents.minute=timeComponents.minute;dateComponents.second=timeComponents.second;dateComponents.meridiem=timeComponents.meridiem;dateComponents.impliedComponents=dateComponents.impliedComponents||[];result.start=new chrono.DateComponents(dateComponents);if(result.end||refResult.end){if(result.start.hour!==undefined){timeComponents=result.end||timeComponents;dateComponents=refResult.end||dateComponents}else{dateComponents=result.end||dateComponents;timeComponents=refResult.end||timeComponents}dateComponents.hour=timeComponents.hour;dateComponents.minute=timeComponents.minute;dateComponents.second=timeComponents.second;dateComponents.impliedComponents=dateComponents.impliedComponents||[];result.end=new chrono.DateComponents(dateComponents)}result.text=result.text+textBetween+refResult.text;new_results.push(new chrono.ParseResult(result));i++}if(i<results.length)new_results.push(results[i]);return new_results}chrono.refiners.MergeComponentsRefine={refine:MergeComponentsRefine}})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function MissingComponentsRefine(text,results,opt){if(results.length<2)return results;for(var i=0;i<results.length;i++){var refResult=null;var result=results[i];if(!results[i+1])refResult=results[i-1];else if(!results[i-1])refResult=results[i+1];else{var nextResult=results[i+1];var distanceNextResult=nextResult.index-(result.index+result.text.length);var prevResult=results[i-1];var distancePrevResult=result.index-(prevResult.index+prevResult.text.length);if(distancePrevResult>distanceNextResult)refResult=nextResult;else refResult=prevResult}var impliedComponents=result.start.impliedComponents||[];var refImpliedComponents=refResult.start.impliedComponents||[];if(result.start.hour===undefined)impliedComponents.push("hour");if(result.start.minute===undefined)impliedComponents.push("minute");impliedComponents.forEach(function(component){if(refResult.start.isCertain(component)){result.start.imply(component,refResult.start[component])}});result.startDate=result.start.date();if(!result.start.isCertain("day")&&!result.start.isCertain("month")&&result.start.isCertain("dayOfWeek")){var date=moment(result.start.date());date.day(result.start.dayOfWeek);result.start.day=date.date();result.start.month=date.month()}if(result.start.dayOfWeek===undefined||impliedComponents.indexOf("dayOfWeek")>=0){var date=moment(result.start.date());result.start.imply("dayOfWeek",date.day())}result.startDate=result.start.date()}return results}chrono.refiners.MissingComponentsRefiner={refine:MissingComponentsRefine,order:500}})();(function(){if(typeof chrono=="undefined")throw"Cannot find the chrono main module";function RemoveReplicateRefine(text,results,opt){var improved_results=[];var PREFIX_TYPO_PATTERN=/(\W)\s*$/;var SUFFIX_TYPO_PATTERN=/^\s*(\W)/;for(var i=0;i<results.length;i++){appendResults(improved_results,results[i])}return improved_results}function appendResults(results,newResult){var index=0;while(index<results.length&&results[index].index<newResult.index)index++;if(index<results.length){var overlapped_index=index;while(overlapped_index<results.length&&results[overlapped_index].index<newResult.index+newResult.text.length){if(results[overlapped_index].text.length>=newResult.text.length)return results;overlapped_index++}results.splice(index,overlapped_index-index)}if(index-1>=0){var oldResult=results[index-1];if(newResult.index<oldResult.index+oldResult.text.length){if(oldResult.text.length>=newResult.text.length)return results;else{results.splice(index-1,1);index=index-1}}}results.splice(index,0,newResult);return results}chrono.refiners.RemoveReplicateRefiner={refine:RemoveReplicateRefine,order:1e3}})()})();